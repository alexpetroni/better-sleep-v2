var k=Object.defineProperty;var U=r=>{throw TypeError(r)};var ee=(r,e,s)=>e in r?k(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var K=(r,e,s)=>ee(r,typeof e!="symbol"?e+"":e,s),Y=(r,e,s)=>e.has(r)||U("Cannot "+s);var n=(r,e,s)=>(Y(r,e,"read from private field"),s?s.call(r):e.get(r)),h=(r,e,s)=>e.has(r)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,s),$=(r,e,s,t)=>(Y(r,e,"write to private field"),t?t.call(r,s):e.set(r,s),s);import{x as j,L as re,M as A,N as se,O as C,P as F,h as te,Q as ne,R as ie,S as ue,T as fe,U as ae,V as Z,W as ce,X as oe,Y as le,g as x,I as G,Z as T,_ as de,$ as E,a0 as pe,a1 as Q,a2 as he,a3 as _e,a4 as q,a5 as z,a6 as ve,o as be,n as Pe,a7 as me,a8 as we,D as Se,d as xe,a9 as S,aa as V,ab as W,ac as ge,ad as Oe}from"./CR_-tMti.js";var l,p,c,_,g,O,I;class Te{constructor(e,s=!0){K(this,"anchor");h(this,l,new Map);h(this,p,new Map);h(this,c,new Map);h(this,_,new Set);h(this,g,!0);h(this,O,()=>{var e=j;if(n(this,l).has(e)){var s=n(this,l).get(e),t=n(this,p).get(s);if(t)re(t),n(this,_).delete(s);else{var i=n(this,c).get(s);i&&(n(this,p).set(s,i.effect),n(this,c).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[u,o]of n(this,l)){if(n(this,l).delete(u),u===e)break;const f=n(this,c).get(o);f&&(A(f.effect),n(this,c).delete(o))}for(const[u,o]of n(this,p)){if(u===s||n(this,_).has(u))continue;const f=()=>{if(Array.from(n(this,l).values()).includes(u)){var v=document.createDocumentFragment();ie(o,v),v.append(C()),n(this,c).set(u,{effect:o,fragment:v})}else A(o);n(this,_).delete(u),n(this,p).delete(u)};n(this,g)||!t?(n(this,_).add(u),se(o,f,!1)):f()}}});h(this,I,e=>{n(this,l).delete(e);const s=Array.from(n(this,l).values());for(const[t,i]of n(this,c))s.includes(t)||(A(i.effect),n(this,c).delete(t))});this.anchor=e,$(this,g,s)}ensure(e,s){var t=j,i=ue();if(s&&!n(this,p).has(e)&&!n(this,c).has(e))if(i){var u=document.createDocumentFragment(),o=C();u.append(o),n(this,c).set(e,{effect:F(()=>s(o)),fragment:u})}else n(this,p).set(e,F(()=>s(this.anchor)));if(n(this,l).set(t,e),i){for(const[f,d]of n(this,p))f===e?t.skipped_effects.delete(d):t.skipped_effects.add(d);for(const[f,d]of n(this,c))f===e?t.skipped_effects.delete(d.effect):t.skipped_effects.add(d.effect);t.oncommit(n(this,O)),t.ondiscard(n(this,I))}else te&&(this.anchor=ne),n(this,O).call(this)}}l=new WeakMap,p=new WeakMap,c=new WeakMap,_=new WeakMap,g=new WeakMap,O=new WeakMap,I=new WeakMap;let D=!1,M=Symbol();function Le(r,e,s){const t=s[e]??(s[e]={store:null,source:ce(void 0),unsubscribe:Z});if(t.store!==r&&!(M in s))if(t.unsubscribe(),t.store=r??null,r==null)t.source.v=void 0,t.unsubscribe=Z;else{var i=!0;t.unsubscribe=oe(r,u=>{i?t.source.v=u:G(t.source,u)}),i=!1}return r&&M in s?le(r):x(t.source)}function Be(){const r={};function e(){fe(()=>{for(var s in r)r[s].unsubscribe();ae(r,M,{enumerable:!1,value:!0})})}return[r,e]}function ye(r){var e=D;try{return D=!1,[r(),D]}finally{D=e}}const De={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function Ne(r,e,s){return new Proxy({props:r,exclude:e},De)}const Ie={get(r,e){if(!r.exclude.includes(e))return x(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,s){if(!(e in r.special)){var t=T;try{z(r.parent_effect),r.special[e]=Ae({get[e](){return r.props[e]}},e,Q)}finally{z(t)}}return r.special[e](s),q(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),q(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function Ue(r,e){return new Proxy({props:r,exclude:e,special:{},version:de(0),parent_effect:T},Ie)}const Re={get(r,e){let s=r.props.length;for(;s--;){let t=r.props[s];if(S(t)&&(t=t()),typeof t=="object"&&t!==null&&e in t)return t[e]}},set(r,e,s){let t=r.props.length;for(;t--;){let i=r.props[t];S(i)&&(i=i());const u=E(i,e);if(u&&u.set)return u.set(s),!0}return!1},getOwnPropertyDescriptor(r,e){let s=r.props.length;for(;s--;){let t=r.props[s];if(S(t)&&(t=t()),typeof t=="object"&&t!==null&&e in t){const i=E(t,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===V||e===W)return!1;for(let s of r.props)if(S(s)&&(s=s()),s!=null&&e in s)return!0;return!1},ownKeys(r){const e=[];for(let s of r.props)if(S(s)&&(s=s()),!!s){for(const t in s)e.includes(t)||e.push(t);for(const t of Object.getOwnPropertySymbols(s))e.includes(t)||e.push(t)}return e}};function Ke(...r){return new Proxy({props:r},Re)}function Ae(r,e,s,t){var B;var i=!Pe||(s&me)!==0,u=(s&ve)!==0,o=(s&ge)!==0,f=t,d=!0,v=()=>(d&&(d=!1,f=o?be(t):t),f),P;if(u){var X=V in r||W in r;P=((B=E(r,e))==null?void 0:B.set)??(X&&e in r?a=>r[e]=a:void 0)}var m,L=!1;u?[m,L]=ye(()=>r[e]):m=r[e],m===void 0&&t!==void 0&&(m=v(),P&&(i&&pe(),P(m)));var b;if(i?b=()=>{var a=r[e];return a===void 0?v():(d=!0,a)}:b=()=>{var a=r[e];return a!==void 0&&(f=void 0),a===void 0?f:a},i&&(s&Q)===0)return b;if(P){var H=r.$$legacy;return(function(a,y){return arguments.length>0?((!i||!y||H||L)&&P(y?b():a),a):b()})}var R=!1,w=((s&we)!==0?Se:xe)(()=>(R=!1,b()));u&&x(w);var J=T;return(function(a,y){if(arguments.length>0){const N=y?x(w):i&&u?he(a):a;return G(w,N),R=!0,f!==void 0&&(f=N),a}return Oe&&R||(J.f&_e)!==0?w.v:x(w)})}export{Te as B,Be as a,Le as b,Ue as l,Ae as p,Ne as r,Ke as s};
