var Be=v=>{throw TypeError(v)};var We=(v,e,n)=>e.has(v)||Be("Cannot "+n);var A=(v,e,n)=>(We(v,e,"read from private field"),n?n.call(v):e.get(v)),se=(v,e,n)=>e.has(v)?Be("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(v):e.set(v,n);import{c as X,a as l,f as _,s as L,d as ke,t as be}from"../chunks/CFTD5zxu.js";import{f as q,p as me,c as s,r,t as Y,g as t,l as he,K as te,J as W,I as Q,a2 as Pe,s as d,G as oe,bg as Ze,u as et}from"../chunks/CR_-tMti.js";import{i as k}from"../chunks/CfMeI259.js";import{B as Le}from"../chunks/Ci8SpDI9.js";import{C as ue}from"../chunks/DImcNq-e.js";import{I as ge,b as pe,h as Ge,j as ce,s as ve,a as Ve,e as we,k as tt,i as rt}from"../chunks/CCArWU9r.js";import{l as xe,s as _e,p as Ce}from"../chunks/aCSjPB9x.js";import{c as fe}from"../chunks/uQBCZOoa.js";import"../chunks/C2pnL9pu.js";import{c as st}from"../chunks/BK9AzX50.js";import{C as De}from"../chunks/DpNC0xP_.js";import{T as at}from"../chunks/DTVrAkWN.js";import{Z as nt,C as Ye}from"../chunks/CvZgrsR-.js";import{M as He}from"../chunks/Ddf0QYjh.js";function ot(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M20 6 9 17l-5-5"}]];ge(v,_e({name:"check"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function Je(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"m6 9 6 6 6-6"}]];ge(v,_e({name:"chevron-down"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function Ue(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"m18 15-6-6-6 6"}]];ge(v,_e({name:"chevron-up"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function Fe(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];ge(v,_e({name:"circle-alert"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function it(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];ge(v,_e({name:"circle-help"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function lt(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];ge(v,_e({name:"external-link"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function dt(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];ge(v,_e({name:"info"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function ut(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5"}],["path",{d:"m9 11 3 3L22 4"}]];ge(v,_e({name:"square-check-big"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}function ct(v,e){const n=xe(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];ge(v,_e({name:"square"},()=>n,{get iconNode(){return o},children:(a,u)=>{var i=X(),c=q(i);pe(c,e,"default",{}),l(a,i)},$$slots:{default:!0}}))}var vt=_('<div role="progressbar"><div class="h-full bg-primary transition-all duration-300 ease-in-out"></div></div>');function ft(v,e){me(e,!0);let n=Ce(e,"max",3,100);const o=te(()=>Math.min(100,Math.max(0,e.value/n()*100)));var a=vt();Ge(a,"aria-valuemin",0);var u=s(a);r(a),Y(i=>{ve(a,1,i),Ge(a,"aria-valuemax",n()),Ge(a,"aria-valuenow",e.value),Ve(u,`width: ${t(o)??""}%`)},[()=>ce(fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e.class))]),l(v,a),he()}var Qe,Te,Ee,ze,Ne,Ae,Me,je,Ie,$e,Re,Oe;class mt{constructor(){se(this,Qe,W(null));se(this,Te,W(null));se(this,Ee,W(null));se(this,ze,W(Pe(new Map)));se(this,Ne,W(Pe({totalQuestions:0,answeredQuestions:0,skippedQuestions:0,percentage:0,currentSectionName:"",sectionsCompleted:0,totalSections:0})));se(this,Ae,W(null));se(this,Me,W(!1));se(this,je,W(null));se(this,Ie,W(!1));se(this,$e,te(()=>this.session!==null));se(this,Re,te(()=>this.responses.size>0&&!this.isComplete));se(this,Oe,te(()=>()=>{if(!this.currentQuestion)return[];const e=this.responses.get(this.currentQuestion.code);return(e==null?void 0:e.answerCodes)||[]}))}get session(){return t(A(this,Qe))}set session(e){Q(A(this,Qe),e,!0)}get currentSection(){return t(A(this,Te))}set currentSection(e){Q(A(this,Te),e,!0)}get currentQuestion(){return t(A(this,Ee))}set currentQuestion(e){Q(A(this,Ee),e,!0)}get responses(){return t(A(this,ze))}set responses(e){Q(A(this,ze),e,!0)}get progress(){return t(A(this,Ne))}set progress(e){Q(A(this,Ne),e,!0)}get result(){return t(A(this,Ae))}set result(e){Q(A(this,Ae),e,!0)}get isLoading(){return t(A(this,Me))}set isLoading(e){Q(A(this,Me),e,!0)}get error(){return t(A(this,je))}set error(e){Q(A(this,je),e,!0)}get isComplete(){return t(A(this,Ie))}set isComplete(e){Q(A(this,Ie),e,!0)}get hasSession(){return t(A(this,$e))}set hasSession(e){Q(A(this,$e),e)}get canGoBack(){return t(A(this,Re))}set canGoBack(e){Q(A(this,Re),e)}get currentAnswers(){return t(A(this,Oe))}set currentAnswers(e){Q(A(this,Oe),e)}async startQuiz(e,n="en"){this.isLoading=!0,this.error=null;try{const o=await fetch("/api/quiz/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e,locale:n})});if(!o.ok){const u=await o.json();throw new Error(u.message||"Failed to start quiz")}const a=await o.json();this.session=a.session,this.currentSection=a.section,this.currentQuestion=a.question,this.progress={totalQuestions:0,answeredQuestions:0,skippedQuestions:0,percentage:0,currentSectionName:a.section.title,sectionsCompleted:0,totalSections:a.totalSections},this.responses=new Map,this.result=null,this.isComplete=!1}catch(o){throw this.error=o instanceof Error?o.message:"An error occurred",o}finally{this.isLoading=!1}}async submitAnswer(e,n,o){if(!this.session||!this.currentQuestion)throw new Error("No active quiz session");this.isLoading=!0,this.error=null;try{const a=await fetch(`/api/quiz/sessions/${this.session.id}/responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:this.currentQuestion.id,questionCode:this.currentQuestion.code,answerCodes:e,scaleValue:n,textValue:o})});if(!a.ok){const i=await a.json();throw new Error(i.message||"Failed to submit answer")}const u=await a.json();this.responses.set(this.currentQuestion.code,u.response),u.progress&&(this.progress=u.progress),u.isComplete?(this.isComplete=!0,this.result=u.result,this.currentQuestion=null):(this.currentSection=u.nextSection,this.currentQuestion=u.nextQuestion)}catch(a){throw this.error=a instanceof Error?a.message:"An error occurred",a}finally{this.isLoading=!1}}async loadSession(e){this.isLoading=!0,this.error=null;try{const n=await fetch(`/api/quiz/sessions/${e}`);if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to load session")}const o=await n.json();if(this.session=o.session,this.progress=o.progress,this.isComplete=o.isComplete,o.isComplete){const a=await fetch(`/api/quiz/sessions/${e}/results`);if(a.ok){const u=await a.json();this.result=u.result}}}catch(n){throw this.error=n instanceof Error?n.message:"An error occurred",n}finally{this.isLoading=!1}}reset(){this.session=null,this.currentSection=null,this.currentQuestion=null,this.responses=new Map,this.progress={totalQuestions:0,answeredQuestions:0,skippedQuestions:0,percentage:0,currentSectionName:"",sectionsCompleted:0,totalSections:0},this.result=null,this.isLoading=!1,this.error=null,this.isComplete=!1}}Qe=new WeakMap,Te=new WeakMap,Ee=new WeakMap,ze=new WeakMap,Ne=new WeakMap,Ae=new WeakMap,Me=new WeakMap,je=new WeakMap,Ie=new WeakMap,$e=new WeakMap,Re=new WeakMap,Oe=new WeakMap;const ne=new mt;var ht=_('<div class="space-y-2"><div class="flex justify-between text-sm text-muted-foreground"><span> </span> <span> </span></div> <!> <div class="flex justify-between text-xs text-muted-foreground"><span> </span> <span> </span></div></div>');function gt(v,e){me(e,!0);var n=ht(),o=s(n),a=s(o),u=s(a,!0);r(a);var i=d(a,2),c=s(i);r(i),r(o);var z=d(o,2);ft(z,{get value(){return e.progress.percentage}});var H=d(z,2),P=s(H),j=s(P);r(P);var N=d(P,2),w=s(N);r(N),r(H),r(n),Y(()=>{L(u,e.progress.currentSectionName),L(c,`${e.progress.answeredQuestions??""} / ${e.progress.totalQuestions??""}`),L(j,`Section ${e.progress.sectionsCompleted+1} of ${e.progress.totalSections??""}`),L(w,`${e.progress.percentage??""}% complete`)}),l(v,n),he()}var pt=_('<button type="button"><div><!></div> <span class="flex-1 text-sm font-medium"> </span></button>'),xt=_('<div class="space-y-3"></div>');function _t(v,e){me(e,!0);function n(a){return e.selected.includes(a)}var o=xt();we(o,21,()=>e.answers,a=>a.id,(a,u)=>{var i=pt();i.__click=()=>e.onSelect(t(u).code);var c=s(i),z=s(c);{var H=N=>{ot(N,{class:"h-3 w-3"})};k(z,N=>{n(t(u).code)&&N(H)})}r(c);var P=d(c,2),j=s(P,!0);r(P),r(i),Y((N,w)=>{ve(i,1,N),ve(c,1,w),L(j,t(u).text)},[()=>ce(fe("relative flex w-full cursor-pointer items-center rounded-lg border-2 p-4 text-left transition-all",n(t(u).code)?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50")),()=>ce(fe("mr-4 flex h-5 w-5 items-center justify-center rounded-full border-2 transition-colors",n(t(u).code)?"border-primary bg-primary text-primary-foreground":"border-muted-foreground"))]),l(a,i)}),r(o),l(v,o),he()}ke(["click"]);var bt=_('<span class="ml-2 text-xs text-muted-foreground">(exclusive)</span>'),yt=_('<button type="button"><div class="mr-4 flex h-5 w-5 items-center justify-center text-muted-foreground"><!></div> <span class="flex-1 text-sm font-medium"> <!></span></button>'),wt=_('<div class="space-y-3"></div> <p class="mt-2 text-center text-xs text-muted-foreground">Select all that apply</p>',1);function St(v,e){me(e,!0);function n(i){return e.selected.includes(i)}function o(i){i.isExclusive&&!n(i.code)?e.selected.forEach(c=>{c!==i.code&&e.onToggle(c)}):i.isExclusive||e.answers.filter(c=>c.isExclusive&&n(c.code)).forEach(c=>e.onToggle(c.code)),e.onToggle(i.code)}var a=wt(),u=q(a);we(u,21,()=>e.answers,i=>i.id,(i,c)=>{var z=yt();z.__click=()=>o(t(c));var H=s(z),P=s(H);{var j=g=>{ut(g,{class:"h-5 w-5 text-primary"})},N=g=>{ct(g,{class:"h-5 w-5"})};k(P,g=>{n(t(c).code)?g(j):g(N,!1)})}r(H);var w=d(H,2),Z=s(w),B=d(Z);{var b=g=>{var S=bt();l(g,S)};k(B,g=>{t(c).isExclusive&&g(b)})}r(w),r(z),Y(g=>{ve(z,1,g),L(Z,`${t(c).text??""} `)},[()=>ce(fe("relative flex w-full cursor-pointer items-center rounded-lg border-2 p-4 text-left transition-all",n(t(c).code)?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50",t(c).isExclusive&&"border-dashed"))]),l(i,z)}),r(u),oe(2),l(v,a),he()}ke(["click"]);var Ct=_('<button type="button"> </button>'),kt=_('<p class="text-center text-sm">Selected: <span class="font-semibold"> </span></p>'),qt=_('<div class="space-y-4"><div class="flex justify-between text-sm text-muted-foreground"><span> </span> <span> </span></div> <div class="flex justify-between gap-1"></div> <!></div>');function Pt(v,e){me(e,!0);let n=Ce(e,"min",3,0),o=Ce(e,"max",3,10),a=Ce(e,"step",3,1);const u=te(()=>()=>{const b=[];for(let g=n();g<=o();g+=a())b.push(g);return b});function i(b){e.onChange(b)}var c=qt(),z=s(c),H=s(z),P=s(H,!0);r(H);var j=d(H,2),N=s(j,!0);r(j),r(z);var w=d(z,2);we(w,20,()=>t(u)(),b=>b,(b,g)=>{var S=Ct();S.__click=()=>i(g);var I=s(S,!0);r(S),Y(ee=>{ve(S,1,ee),L(I,g)},[()=>ce(fe("flex h-12 flex-1 items-center justify-center rounded-lg border-2 text-sm font-medium transition-all",e.value===g?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary/50 hover:bg-accent/50"))]),l(b,S)}),r(w);var Z=d(w,2);{var B=b=>{var g=kt(),S=d(s(g)),I=s(S,!0);r(S),r(g),Y(()=>L(I,e.value)),l(b,g)};k(Z,b=>{e.value!==void 0&&b(B)})}r(c),Y(()=>{L(P,e.minLabel||n()),L(N,e.maxLabel||o())}),l(v,c),he()}ke(["click"]);var Lt=_('<div class="space-y-2"><textarea class="min-h-[120px] w-full rounded-lg border-2 border-border bg-background p-4 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-ring"></textarea> <p class="text-right text-xs text-muted-foreground"> </p></div>');function Qt(v,e){me(e,!0);let n=Ce(e,"placeholder",3,"Enter your answer...");function o(z){const H=z.target;e.onChange(H.value)}var a=Lt(),u=s(a);Ze(u),u.__input=o;var i=d(u,2),c=s(i);r(i),r(a),Y(()=>{var z;Ge(u,"placeholder",n()),tt(u,e.value),L(c,`${(((z=e.value)==null?void 0:z.length)||0)??""} characters`)}),l(v,a),he()}ke(["input"]);var Tt=_('<p class="rounded-lg bg-muted p-3 text-sm text-muted-foreground"> </p>'),Et=_('<button type="button" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground"><!> </button> <!>',1),zt=_('<span class="mr-2 inline-block h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"></span> Submitting...',1),Nt=_('<div class="space-y-6"><div class="space-y-2"><h2 class="text-xl font-semibold leading-relaxed"> </h2> <!></div> <div class="py-4"><!></div> <div class="flex justify-end"><!></div></div>');function At(v,e){me(e,!0);let n=Ce(e,"isLoading",3,!1),o=W(Pe([])),a=W(void 0),u=W(""),i=W(!1);et(()=>{e.question&&(Q(o,[],!0),Q(a,void 0),Q(u,""),Q(i,!1))});function c(w){Q(o,[w],!0)}function z(w){t(o).includes(w)?Q(o,t(o).filter(Z=>Z!==w),!0):Q(o,[...t(o),w],!0)}function H(w){Q(a,w,!0)}function P(w){Q(u,w,!0)}function j(){e.question.type==="SCALE"?e.onSubmit([],t(a),void 0):e.question.type==="TEXT"?e.onSubmit([],void 0,t(u)):e.onSubmit(t(o),void 0,void 0)}const N=te(()=>()=>n()?!1:e.question.type==="SCALE"?t(a)!==void 0:e.question.type==="TEXT"?t(u).trim().length>0:t(o).length>0);ue(v,{class:"mx-auto max-w-2xl p-6",children:(w,Z)=>{var B=Nt(),b=s(B),g=s(b),S=s(g,!0);r(g);var I=d(g,2);{var ee=h=>{var $=Et(),T=q($);T.__click=()=>Q(i,!t(i));var G=s(T);it(G,{class:"h-4 w-4"});var E=d(G);r(T);var R=d(T,2);{var J=M=>{var U=Tt(),D=s(U,!0);r(U),Y(()=>L(D,e.question.helpText)),l(M,U)};k(R,M=>{t(i)&&M(J)})}Y(()=>L(E,` ${t(i)?"Hide help":"Show help"}`)),l(h,$)};k(I,h=>{e.question.helpText&&h(ee)})}r(b);var m=d(b,2),p=s(m);{var O=h=>{_t(h,{get answers(){return e.question.answers},get selected(){return t(o)},onSelect:c})},y=h=>{var $=X(),T=q($);{var G=R=>{St(R,{get answers(){return e.question.answers},get selected(){return t(o)},onToggle:z})},E=R=>{var J=X(),M=q(J);{var U=V=>{{let ae=te(()=>{var f;return((f=e.question.scaleConfig)==null?void 0:f.min)??0}),ie=te(()=>{var f;return((f=e.question.scaleConfig)==null?void 0:f.max)??10}),re=te(()=>{var f;return((f=e.question.scaleConfig)==null?void 0:f.step)??1}),F=te(()=>{var f;return(f=e.question.scaleConfig)==null?void 0:f.minLabel}),le=te(()=>{var f;return(f=e.question.scaleConfig)==null?void 0:f.maxLabel});Pt(V,{get min(){return t(ae)},get max(){return t(ie)},get step(){return t(re)},get minLabel(){return t(F)},get maxLabel(){return t(le)},get value(){return t(a)},onChange:H})}},D=V=>{var ae=X(),ie=q(ae);{var re=F=>{Qt(F,{get value(){return t(u)},onChange:P})};k(ie,F=>{e.question.type==="TEXT"&&F(re)},!0)}l(V,ae)};k(M,V=>{e.question.type==="SCALE"?V(U):V(D,!1)},!0)}l(R,J)};k(T,R=>{e.question.type==="MULTIPLE"?R(G):R(E,!1)},!0)}l(h,$)};k(p,h=>{e.question.type==="SINGLE"?h(O):h(y,!1)})}r(m);var C=d(m,2),x=s(C);{let h=te(()=>!t(N)());Le(x,{size:"lg",get disabled(){return t(h)},onclick:j,children:($,T)=>{var G=X(),E=q(G);{var R=M=>{var U=zt();oe(),l(M,U)},J=M=>{var U=be("Continue");l(M,U)};k(E,M=>{n()?M(R):M(J,!1)})}l($,G)},$$slots:{default:!0}})}r(C),r(B),Y(()=>L(S,e.question.text)),l(w,B)},$$slots:{default:!0}}),he()}ke(["click"]);var Mt=_('<h2 class="mb-4 text-2xl font-bold">Your Sleep Health Score</h2> <div class="mb-2"><span> </span> <span class="text-2xl text-muted-foreground">/100</span></div> <p class="text-muted-foreground"><!></p>',1),jt=_('<span class="text-xs font-medium uppercase tracking-wide">Professional consultation recommended</span>'),It=_('<div class="mt-3 space-y-2 pl-8"><p class="text-sm"> </p> <p class="text-sm font-medium"> </p></div>'),$t=_('<div><button type="button" class="flex w-full items-start justify-between text-left"><div class="flex items-start gap-3"><!> <div><h4 class="font-semibold"> </h4> <!></div></div> <!></button> <!></div>'),Rt=_('<h3 class="mb-4 text-xl font-semibold">Important Health Indicators</h3> <div class="space-y-3"></div>',1),Ot=_('<div class="mt-3 border-t pt-3"><p class="text-sm text-muted-foreground"> </p> <p class="mt-1 text-sm">Risk level: <span> </span></p></div>'),Gt=_('<div class="rounded-lg border p-4"><button type="button" class="flex w-full items-center justify-between"><div class="flex-1"><div class="flex items-center justify-between"><h4 class="font-medium"> </h4> <span> </span></div> <div class="mt-2 h-2 w-full rounded-full bg-secondary"><div></div></div></div> <div class="ml-4"><!></div></button> <!></div>'),Ht=_('<h3 class="mb-4 text-xl font-semibold">Risk Categories</h3> <div class="space-y-3"></div>',1),Ft=_('<li class="flex items-start gap-2 text-sm"><!> <span> </span></li>'),Bt=_('<ul class="mt-3 space-y-1"></ul>'),Dt=_('<div class="rounded-lg border bg-card p-4"><div class="flex items-start gap-3"><div class="flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground"> </div> <div class="flex-1"><h4 class="font-semibold"> </h4> <p class="mt-1 text-sm text-muted-foreground"> </p> <!></div></div></div>'),Yt=_('<h3 class="mb-4 text-xl font-semibold">Personalized Recommendations</h3> <div class="space-y-4"></div>',1),Jt=_("Get Personalized Sleep Plan <!>",1),Ut=_('<div class="mx-auto max-w-3xl space-y-8"><!> <!> <!> <!> <div class="flex flex-col items-center gap-4 sm:flex-row sm:justify-center"><!> <!></div></div>');function Vt(v,e){me(e,!0);let n=W(Pe(new Set)),o=W(Pe(new Set));function a(m){const p=new Set(t(n));p.has(m)?p.delete(m):p.add(m),Q(n,p,!0)}function u(m){const p=new Set(t(o));p.has(m)?p.delete(m):p.add(m),Q(o,p,!0)}function i(m){switch(m){case"CRITICAL":return"text-destructive";case"HIGH":return"text-warning";case"MODERATE":return"text-yellow-500";default:return"text-success"}}function c(m){switch(m){case"URGENT":return at;case"IMPORTANT":return Fe;case"MODERATE":return dt;default:return De}}function z(m){switch(m){case"URGENT":return"bg-destructive/10 border-destructive text-destructive";case"IMPORTANT":return"bg-warning/10 border-warning text-warning";case"MODERATE":return"bg-yellow-500/10 border-yellow-500 text-yellow-600";default:return"bg-muted border-muted-foreground text-muted-foreground"}}const H=te(()=>()=>e.result.overallScore>=75?"text-destructive":e.result.overallScore>=50?"text-warning":e.result.overallScore>=25?"text-yellow-500":"text-success");var P=Ut(),j=s(P);ue(j,{class:"p-6 text-center",children:(m,p)=>{var O=Mt(),y=d(q(O),2),C=s(y),x=s(C,!0);r(C),oe(2),r(y);var h=d(y,2),$=s(h);{var T=E=>{var R=be("Multiple factors are significantly impacting your sleep. Professional consultation recommended.");l(E,R)},G=E=>{var R=X(),J=q(R);{var M=D=>{var V=be("Several factors are affecting your sleep quality. Consider addressing the top risks below.");l(D,V)},U=D=>{var V=X(),ae=q(V);{var ie=F=>{var le=be("Some factors may be affecting your sleep. Small adjustments could help improve your rest.");l(F,le)},re=F=>{var le=be("Your sleep health looks good! Keep up the healthy habits.");l(F,le)};k(ae,F=>{e.result.overallScore>=25?F(ie):F(re,!1)},!0)}l(D,V)};k(J,D=>{e.result.overallScore>=50?D(M):D(U,!1)},!0)}l(E,R)};k($,E=>{e.result.overallScore>=75?E(T):E(G,!1)})}r(h),Y(E=>{ve(C,1,E),L(x,e.result.overallScore)},[()=>ce(fe("text-6xl font-bold",t(H)()))]),l(m,O)},$$slots:{default:!0}});var N=d(j,2);{var w=m=>{ue(m,{class:"p-6",children:(p,O)=>{var y=Rt(),C=d(q(y),2);we(C,21,()=>e.result.medicalFlags,x=>x.code,(x,h)=>{const $=te(()=>c(t(h).severity));var T=$t(),G=s(T);G.__click=()=>u(t(h).code);var E=s(G),R=s(E);st(R,()=>t($),(f,K)=>{K(f,{class:"mt-0.5 h-5 w-5 flex-shrink-0"})});var J=d(R,2),M=s(J),U=s(M,!0);r(M);var D=d(M,2);{var V=f=>{var K=jt();l(f,K)};k(D,f=>{t(h).requiresProfessional&&f(V)})}r(J),r(E);var ae=d(E,2);{var ie=f=>{Ue(f,{class:"h-5 w-5 flex-shrink-0"})},re=f=>{Je(f,{class:"h-5 w-5 flex-shrink-0"})};k(ae,f=>{t(o).has(t(h).code)?f(ie):f(re,!1)})}r(G);var F=d(G,2);{var le=f=>{var K=It(),de=s(K),Se=s(de,!0);r(de);var ye=d(de,2),qe=s(ye,!0);r(ye),r(K),Y(()=>{L(Se,t(h).description),L(qe,t(h).recommendation)}),l(f,K)};k(F,f=>{t(o).has(t(h).code)&&f(le)})}r(T),Y(f=>{ve(T,1,f),L(U,t(h).title)},[()=>ce(fe("rounded-lg border-2 p-4",z(t(h).severity)))]),l(x,T)}),r(C),l(p,y)},$$slots:{default:!0}})};k(N,m=>{e.result.medicalFlags.length>0&&m(w)})}var Z=d(N,2);ue(Z,{class:"p-6",children:(m,p)=>{var O=Ht(),y=d(q(O),2);we(y,21,()=>e.result.categoryScores.filter(C=>C.percentage>0).sort((C,x)=>x.percentage-C.percentage),C=>C.categoryCode,(C,x)=>{var h=Gt(),$=s(h);$.__click=()=>a(t(x).categoryCode);var T=s($),G=s(T),E=s(G),R=s(E,!0);r(E);var J=d(E,2),M=s(J);r(J),r(G);var U=d(G,2),D=s(U);r(U),r(T);var V=d(T,2),ae=s(V);{var ie=f=>{Ue(f,{class:"h-5 w-5 text-muted-foreground"})},re=f=>{Je(f,{class:"h-5 w-5 text-muted-foreground"})};k(ae,f=>{t(n).has(t(x).categoryCode)?f(ie):f(re,!1)})}r(V),r($);var F=d($,2);{var le=f=>{var K=Ot(),de=s(K),Se=s(de);r(de);var ye=d(de,2),qe=d(s(ye)),Xe=s(qe,!0);r(qe),r(ye),r(K),Y(Ke=>{L(Se,`Raw score: ${t(x).rawScore??""} / ${t(x).maxPossible??""}`),ve(qe,1,Ke),L(Xe,t(x).riskLevel)},[()=>ce(fe("font-medium",i(t(x).riskLevel)))]),l(f,K)};k(F,f=>{t(n).has(t(x).categoryCode)&&f(le)})}r(h),Y((f,K)=>{L(R,t(x).categoryName),ve(J,1,f),L(M,`${t(x).percentage??""}%`),ve(D,1,K),Ve(D,`width: ${t(x).percentage??""}%`)},[()=>ce(fe("font-semibold",i(t(x).riskLevel))),()=>ce(fe("h-full rounded-full transition-all",t(x).riskLevel==="CRITICAL"&&"bg-destructive",t(x).riskLevel==="HIGH"&&"bg-warning",t(x).riskLevel==="MODERATE"&&"bg-yellow-500",t(x).riskLevel==="LOW"&&"bg-success"))]),l(C,h)}),r(y),l(m,O)},$$slots:{default:!0}});var B=d(Z,2);{var b=m=>{ue(m,{class:"p-6",children:(p,O)=>{var y=Yt(),C=d(q(y),2);we(C,23,()=>e.result.recommendations,x=>x.categoryCode,(x,h,$)=>{var T=Dt(),G=s(T),E=s(G),R=s(E,!0);r(E);var J=d(E,2),M=s(J),U=s(M,!0);r(M);var D=d(M,2),V=s(D,!0);r(D);var ae=d(D,2);{var ie=re=>{var F=Bt();we(F,21,()=>t(h).actionItems,rt,(le,f)=>{var K=Ft(),de=s(K);De(de,{class:"mt-0.5 h-4 w-4 flex-shrink-0 text-success"});var Se=d(de,2),ye=s(Se,!0);r(Se),r(K),Y(()=>L(ye,t(f))),l(le,K)}),r(F),l(re,F)};k(ae,re=>{t(h).actionItems.length>0&&re(ie)})}r(J),r(G),r(T),Y(()=>{L(R,t($)+1),L(U,t(h).title),L(V,t(h).description)}),l(x,T)}),r(C),l(p,y)},$$slots:{default:!0}})};k(B,m=>{e.result.recommendations.length>0&&m(b)})}var g=d(B,2),S=s(g);{var I=m=>{Le(m,{variant:"outline",get onclick(){return e.onRetake},children:(p,O)=>{oe();var y=be("Take Quiz Again");l(p,y)},$$slots:{default:!0}})};k(S,m=>{e.onRetake&&m(I)})}var ee=d(S,2);Le(ee,{children:(m,p)=>{oe();var O=Jt(),y=d(q(O));lt(y,{class:"ml-2 h-4 w-4"}),l(m,O)},$$slots:{default:!0}}),r(g),r(P),l(v,P),he()}ke(["click"]);var Xt=_(`<div class="absolute right-4 top-4 rounded-full bg-primary/10 px-3 py-1 text-xs font-medium text-primary">Recommended</div> <div class="mb-4 inline-flex rounded-lg bg-primary/10 p-3"><!></div> <h2 class="mb-2 text-xl font-semibold">Quick Assessment</h2> <p class="mb-4 text-sm text-muted-foreground">A focused evaluation of the most common sleep factors.
					Perfect if you're short on time or want a quick overview.</p> <ul class="mb-6 space-y-2 text-sm"><li class="flex items-center gap-2"><!> <span>5-7 minutes</span></li> <li class="flex items-center gap-2"><!> <span>30-40 questions</span></li></ul> <!>`,1),Kt=_(`<div class="mb-4 inline-flex rounded-lg bg-secondary p-3"><!></div> <h2 class="mb-2 text-xl font-semibold">Comprehensive Assessment</h2> <p class="mb-4 text-sm text-muted-foreground">A thorough analysis covering all 78 sleep-affecting factors.
					Best for detailed insights and personalized recommendations.</p> <ul class="mb-6 space-y-2 text-sm"><li class="flex items-center gap-2"><!> <span>10-15 minutes</span></li> <li class="flex items-center gap-2"><!> <span>50-70 questions</span></li></ul> <!>`,1),Wt=_(`<div class="flex items-start gap-3"><!> <div class="text-sm text-muted-foreground"><p class="font-medium text-foreground">Privacy Notice</p> <p>Your responses are used only to generate your personalized assessment.
						We do not store personal health information without your explicit consent.</p></div></div>`),Zt=_('<div class="text-center"><h1 class="mb-4 text-3xl font-bold">Choose Your Assessment Type</h1> <p class="mb-8 text-muted-foreground">Select the assessment that best fits your needs and available time.</p></div> <div class="grid gap-6 md:grid-cols-2"><!> <!></div> <!>',1),er=_('<div class="flex items-center gap-2 text-destructive"><!> <p> </p></div>'),tr=_('<div class="space-y-6"><!> <!> <!></div>'),rr=_("<p>Loading results...</p>"),sr=_('<div class="mx-auto max-w-4xl py-8"><!></div>');function _r(v,e){me(e,!0);let n=W("select-mode");async function o(P){try{await ne.startQuiz(P,"en"),Q(n,"quiz")}catch(j){console.error("Failed to start quiz:",j)}}async function a(P,j,N){try{await ne.submitAnswer(P,j,N),ne.isComplete&&Q(n,"results")}catch(w){console.error("Failed to submit answer:",w)}}function u(){ne.reset(),Q(n,"select-mode")}var i=sr(),c=s(i);{var z=P=>{var j=Zt(),N=d(q(j),2),w=s(N);ue(w,{class:"relative overflow-hidden p-6 transition-all hover:border-primary hover:shadow-lg",children:(b,g)=>{var S=Xt(),I=d(q(S),2),ee=s(I);nt(ee,{class:"h-6 w-6 text-primary"}),r(I);var m=d(I,6),p=s(m),O=s(p);Ye(O,{class:"h-4 w-4 text-muted-foreground"}),oe(2),r(p);var y=d(p,2),C=s(y);He(C,{class:"h-4 w-4 text-muted-foreground"}),oe(2),r(y),r(m);var x=d(m,2);Le(x,{class:"w-full",onclick:()=>o("RAPID"),children:(h,$)=>{oe();var T=be("Start Quick Assessment");l(h,T)},$$slots:{default:!0}}),l(b,S)},$$slots:{default:!0}});var Z=d(w,2);ue(Z,{class:"p-6 transition-all hover:border-primary hover:shadow-lg",children:(b,g)=>{var S=Kt(),I=q(S),ee=s(I);He(ee,{class:"h-6 w-6"}),r(I);var m=d(I,6),p=s(m),O=s(p);Ye(O,{class:"h-4 w-4 text-muted-foreground"}),oe(2),r(p);var y=d(p,2),C=s(y);He(C,{class:"h-4 w-4 text-muted-foreground"}),oe(2),r(y),r(m);var x=d(m,2);Le(x,{variant:"outline",class:"w-full",onclick:()=>o("COMPLETE"),children:(h,$)=>{oe();var T=be("Start Comprehensive Assessment");l(h,T)},$$slots:{default:!0}}),l(b,S)},$$slots:{default:!0}}),r(N);var B=d(N,2);ue(B,{class:"mt-8 bg-muted/50 p-4",children:(b,g)=>{var S=Wt(),I=s(S);Fe(I,{class:"mt-0.5 h-5 w-5 flex-shrink-0 text-muted-foreground"}),oe(2),r(S),l(b,S)},$$slots:{default:!0}}),l(P,j)},H=P=>{var j=X(),N=q(j);{var w=B=>{var b=tr(),g=s(b);gt(g,{get progress(){return ne.progress}});var S=d(g,2);{var I=p=>{At(p,{get question(){return ne.currentQuestion},onSubmit:a,get isLoading(){return ne.isLoading}})};k(S,p=>{ne.currentQuestion&&p(I)})}var ee=d(S,2);{var m=p=>{ue(p,{class:"border-destructive bg-destructive/10 p-4",children:(O,y)=>{var C=er(),x=s(C);Fe(x,{class:"h-5 w-5"});var h=d(x,2),$=s(h,!0);r(h),r(C),Y(()=>L($,ne.error)),l(O,C)},$$slots:{default:!0}})};k(ee,p=>{ne.error&&p(m)})}r(b),l(B,b)},Z=B=>{var b=X(),g=q(b);{var S=I=>{var ee=X(),m=q(ee);{var p=y=>{Vt(y,{get result(){return ne.result},onRetake:u})},O=y=>{ue(y,{class:"p-6 text-center",children:(C,x)=>{var h=rr();l(C,h)},$$slots:{default:!0}})};k(m,y=>{ne.result?y(p):y(O,!1)})}l(I,ee)};k(g,I=>{t(n)==="results"&&I(S)},!0)}l(B,b)};k(N,B=>{t(n)==="quiz"?B(w):B(Z,!1)},!0)}l(P,j)};k(c,P=>{t(n)==="select-mode"?P(z):P(H,!1)})}r(i),l(v,i),he()}export{_r as component};
